      NIST SP 800-63C-4 ipd                                             Digital Identity Guidelines
      December 2022                                                     Federation and Assertions


672   access an RP that is otherwise unknown by their IdP. The RP informs the subscriber about
673   the uses of all attributes being requested from the IdP, and the IdP prompts the subscriber
674   for consent to release their attributes to the RP.
675   Establishment of a trust agreement is required for all federation transactions, even those
676   in which the IdP and RP have a shared security domain or shared legal ownership. In
677   such cases, the establishment of the trust agreement is an internal process that can be
678   completed quickly.
679   During the course of a single federation transaction, it is important for the policies and
680   expectations of the IdP and RP to be unambiguous for all parties involved. Therefore,
681   there SHOULD be only one set of trust agreements in effect for a given transaction. This
682   will usually be determined by the unique pair consisting of a single IdP and a single
683   RP. However, these agreements could vary in other ways, such as an IdP and RP having
684   different agreements for different populations of subscribers.
685   The existence of a trust agreement between two parties does not preclude the existence
686   of other agreements for each party in the agreement to have with other parties. That is to
687   say, an IdP can have (and generally does have) independent agreements with multiple RPs
688   simultaneously, and an RP can likewise have independent agreements with multiple IdPs
689   simultaneously.

690   5.1.1. Bilateral Trust Agreements
691   In a bilateral trust agreement, each potential pairing of an IdP and RP form a trust
692   relationship with each other. In this model, the IdP and RP each act as their own authority
693   and establish the other party as capable of performing its role within the federation.
694   The IdP SHALL disclose its supported IAL, AAL, and FAL levels to the RP. The IdP
695    MAY disclose a subset of its capabilities to a given RP depending on the needs of the
696   application, for example only disclosing to a low-risk RP that accounts are proofed at
697   IAL1 or better.
698   The RP SHALL disclose its list of required attributes to the IdP, including its purpose for
699   use of each requested attribute. The RP SHALL communicate its required IAL, AAL,
700   and FAL to the IdP, including whether no claim is required for IAL or AAL.
701   The IdP SHALL transmit only those attributes that were explicitly requested by the RP.
702   RPs SHALL include their requested attributes in their privacy risk assessment.

703   5.1.2. Multilateral Trust Agreements
704   In a multilateral trust agreement, the federated parties defer to a federation authority
705   to assist in making federation trust decisions and to establish the working relationship
706   between parties. In this model, the federation authority manages the membership of IdPs
707   and RPs in the federation agreement. The federation authority conducts some level of

                                                  15
