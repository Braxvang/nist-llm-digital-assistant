                                                                             GUIDELINES FOR THE SECURE DEPLOYMENT OF IPV6


the service provider’s IPv6 prefix provides such a route. In all other respects, except as noted below, 6to4
and 6rd work similarly.

6.5.5.1        Using 6to4 and 6rd

Each 6to4 border router must have a globally unique IPv4 address (e.g., w.x.y.z.). The IPv6 network
connected to that router uses the IPv6 prefix 2002:w.x.y.z/4854. An entire /48 IPv6 prefix can be routed
through one IPv4 address. 6to4 IPv6 sites can automatically connect to each other over the IPv4 Internet.
This prefix can be advertised to the IPv6 network or sub-allocated as desired. IPv6 hosts can use
autoconfiguration to generate interface IDs for 6to4 prefixes. The 6to4 border routers tunnel IPv6 over
IPv4 using protocol 41.

The IPv6 destination does not need to have a 6to4 prefix. It may be any globally unique IPv6 address.
Similarly, IPv6 packets can be sent from any IPv6 address to a 6to4 address. Relays, which are IPv6
routers with at least one 6to4 address and one native IPv6 address, are used to connect 6to4 domains with
the native IPv6 Internet. Each 6to4 domain must have at least one relay router, which is normally reached
with an (IPv4) anycast address (RFC 3068, An Anycast Prefix for 6to4 Relay Routers).

The 6to4 mechanism has been widely implemented and is in use in both production and trial networks.
Sites that have globally routable IPv6 prefixes should avoid using the 6to4 protocol. Note that 6to4 sites
require a globally unique IPv4 address. The 6to4 and 6rd protocols presume that IPv4 is still being used
and do not solve the IPv4 space exhaustion problem. Relay routers that serve a large number of 6to4
routers have to import that part of the IPv4 forwarding table into IPv6.

The 6to4 and 6rd mechanisms can work on networks using IPv4 NAT as long as these two conditions are
met:

         The NAT boxes are fully functional IPv6 routers
         The globally unique IPv4 address of the outermost NAT box is used to construct and advertise
          the IPv6 6to4 prefix. (For 6rd, this condition is not necessary.)
6.5.5.2        Security Considerations for 6to4 and 6rd

In addition to the general security advice for tunneling mechanisms, RFC 3056 contains an overview of
6to4 security. RFC 3964, Security Considerations for 6to4, examines many 6to4 security concerns more
thoroughly. In particular, it considers the following cases:

         6to4 routers not being able to identify whether relays are legitimate
         Wrong or partially implemented 6to4 protocol on the router or relay security checks
         The 6to4 architecture being used to participate in DOS or reflected DOS attacks or made to
          participate in ―packet laundering,‖ i.e., making another attack harder to trace
         The 6to4 relays being subject to administrative abuse, e.g., theft of service, or being seen as a
          source of abuse.
Complete solutions to all of these abuses do not exist, but basic guidelines for using 6to4 effectively

54
     For 6rd, the IPv4 address may be globally unique or a non-routable RFC 1918 address used only within the service
     provider’s network. The exact layout and length of the 6rd IPv6 prefix varies according to the length of the service
     provider’s IPv6 prefix and other tradeoffs.


                                                              6-18
