Special Publication 800-73-4                                                       Part 3: PIV Client Application
Interfaces for Personal Identity Verification                                            Programming Interface

pivGetData is PIV_SECURITY_CONDITIONS_NOT_SATISFIED this indicates that communication with
the card is over a contactless interface.

3.1     Entry Points for Communication

3.1.1    pivMiddlewareVersion

Purpose:               Returns the PIV Middleware version string

Prototype:             status_word pivMiddlewareVersion(
                          OUT   version           versionString
                       );

Parameter:             versionString

                       +    For SP 800-73-4 Part 3 conformant PIV Middleware, the parameter returns
                            “800-73-4 Client API” or “800-73-4 Client API with SM”.

                       +    For SP 800-73-3 Part 3 conformant PIV Middleware, the parameter returns
                            “800-73-3 Client API”.

                       +    For SP 800-73-2 Part 3 conformant PIV Middleware, the parameter returns
                            “800-73-2 Client API”.

                       +    For SP 800-73-1 conformant PIV Middleware, the pivMiddlewareVersion client
                            API function is not supported. Therefore, a client application invoking the
                            pivMiddlewareVersion function should expect a “function-not-supported” error
                            from a SP 800-73-1 conformant PIV Middleware. For purposes of version
                            determination, failure to obtain a specific version from pivMiddlewareVersion
                            shall be considered equivalent to obtaining a response of “800-73-1 Client API”.

Return Codes:          PIV_OK

PIV Middleware that returns a versionString of “800-73-4 Client API with SM” shall implement all PIV
Middleware functions listed in Table 1 and be able to recognize and process all mandatory and optional
PIV data objects. PIV Middleware that returns a versionString of “800-73-4 Client API” shall implement
all PIV Middleware functions listed in Table 1 except pivEstablishSecureMessaging and shall be able to
recognize and process all mandatory and optional PIV data objects.

Note: Only SP 800-73-4 based PIV Middleware supports the use of on-card biometric comparison (OCC)
data and the pairing code with the pivLogIntoCardApplication function, and only PIV Middleware that
returns a versionString of “800-73-4 Client API with SM” supports the use of secure messaging (SM) and
the virtual contact interface, which have been introduced in Parts 1 and 2 of SP 800-73-4. SP 800-73-1,
SP 800-73-2, and SP 800-73-3 based PIV Middleware remain valid implementations; however, agencies
are cautioned that using these implementations may result in limited interoperability. Further information
can be found in Part 1 of SP 800-73-4. It provides an SP 800-73 revision history (Section I) and
recommendations for PIV Middleware configuration management (Section II).

3.1.2    pivConnect

Purpose:               Connects the client API to the PIV Card Application on a specific ICC.

Prototype:             status_word pivConnect(
                          IN    Boolean           sharedConnection,
                          INOUT sequence of bytes connectionDescription,

                                                       5
