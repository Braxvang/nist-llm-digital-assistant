                                                                                              NIST SP 800-77 REV. 1                                                           GUIDE TO IPSEC VPNS


                                                                                              be routed though the main corporate firewall, which could decrease the costs and risks associated
                                                                                              with the administration of multiple firewalls. To set up this type of implementation, both routers
                                                                                              need to have a static IP address because the addresses would have to be entered into the IPsec
                                                                                              configurations. In most cases, this is not an issue for the router at the main office. However, it
                                                                                              may be a problem for locations such as home offices that often use DSL or cable modem
                                                                                              services, which may offer only dynamic IP addresses. Remote access solutions may be more
                                                                                              practical for such situations.

                                                                                              In this case study, a gateway-to-gateway VPN was established between a remote office and the
                                                                                              main office. An interesting variant on this scenario is a gateway-to-gateway VPN between the
                                                                                              main office and the network of a business partner. In such a case, more stringent security
This publication is available free of charge from: https://doi.org/10.6028/NIST.SP.800-77r1




                                                                                              measures may be needed to satisfy each organization’s requirements for communication. The
                                                                                              organizations should also establish a formal interconnection agreement that specifies the
                                                                                              technical and security requirements for establishing, operating, and maintaining the
                                                                                              interconnection, as well as document the terms and conditions for sharing data and information
                                                                                              resources in a secure manner. Appendix B contains more information on interconnection
                                                                                              agreements.

                                                                                              In a gateway-to-gateway VPN between the organization and a business partner, each
                                                                                              organization typically has control over its own VPN gateway. Accordingly, the organizations
                                                                                              need to identify an acceptable out-of-band method for provisioning each other’s gateways with
                                                                                              the necessary authentication information, such as PSKs or digital certificates. Another possible
                                                                                              difference from the original scenario is that in the business partner scenario, both organizations
                                                                                              should configure their packet filters to be as restrictive as possible from the beginning of the
                                                                                              implementation. The organizations also need to coordinate their testing efforts and determine
                                                                                              how a prototype for the solution can best be tested.

                                                                                              The solution for one remote location can be extended with additional remote office locations. If
                                                                                              one remote office needs to be able to communicate with other remote offices, another design
                                                                                              decision needs to be made. Either each remote office can build an IPsec tunnel to other remote
                                                                                              offices and bypass the main office, or each remote office can contact other remote offices via the
                                                                                              main office. This latter setup is called hub-spoke.

                                                                                              The advantage of the hub-spoke architecture is that the main office is the central hub that can
                                                                                              dictate policies and inspect all traffic. If a remote office wants to communicate with another
                                                                                              remote office, it involves two separate IPsec tunnels. The hub server decrypts the traffic from the
                                                                                              first remote office, performs network inspection and packet filter restrictions on the network
                                                                                              traffic, and then re-encrypts the traffic to send it via the second IPsec tunnel to the second remote
                                                                                              office. Adding a branch does not require any other branches to be reconfigured for the new
                                                                                              branch.

                                                                                              The disadvantage of the hub-spoke architecture is that the main office requires significantly more
                                                                                              bandwidth to facilitate all of the remote branches’ traffic to each other. It might require an IPsec
                                                                                              service with additional hardware acceleration network cards to be able to handle all of the IPsec
                                                                                              traffic. It also becomes a single point of failure. When the branches communicate via their own
                                                                                              IPsec connections, the branches are more independent of the main office. It does require more



                                                                                                                                              103
