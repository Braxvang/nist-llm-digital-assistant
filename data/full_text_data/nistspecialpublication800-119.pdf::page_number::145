                                                              GUIDELINES FOR THE SECURE DEPLOYMENT OF IPV6


router that provides the remote tunnel endpoint for the Teredo client. Together, the Teredo server and
Teredo relay provide IPv6 connectivity for the client with the IPv6 Internet and with mechanisms like
6to4.




                   Figure 6-4. Example - Tunneling IPv6 over IPv4 Networks with Teredo


In Figure 6-4, the messages work as follows:

1. The Teredo Client sends an IPv6 ping to the remote interface through its Teredo server (encapsulated
   in UDP and IPv4).
2. The Teredo server decapsulates and forwards the ping.
3. The ping reply goes to a Teredo relay.
4. The ping reply goes to the Teredo server.
5. The Teredo server tells the Teredo client what Teredo relay to use.
6. The Teredo client sends normal (encapsulated) traffic to the Teredo relay.
7. The Teredo client receives normal (encapsulated) traffic from the Teredo relay.
Separating the Teredo server and Teredo relay reduces the load on servers and provides a more direct path


                                                  6-23
