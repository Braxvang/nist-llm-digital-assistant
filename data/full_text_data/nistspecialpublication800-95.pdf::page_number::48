                                                                           GUIDE TO SECURE WEB SERVICES



   <Policy>
     <ExactlyOne>
         <sp:TransportBinding>...</sp:TransportBinding>
         <All>
            <sp:SignedParts>
              <All>
                <sp:Body/>
                <sp:Header/>
              </All>
            </sp:SignedParts>
            <sp:EncryptedParts>
              <Policy>
                <sp:Body/>
              </Policy>
            </sp:EncryptedParts>
         </All>
     </ExactlyOne>
   </Policy>

                       Figure 3-4. Sample WS-Policy Expression Using ExactlyOne

The ExactlyOne expression in Figure 3-4 contains two expressions related to securing Web service
messages between the requester and provider. Senders must choose exactly one of these options when
sending a SOAP message to this service:

 sp:TransportBinding, which indicates requesters may use SSL/TLS to secure messages
 All, which contains two WS-SecurityPolicy expressions that must be followed when using WS-
  Security in place of SSL/TLS:
       –   sp:SignedParts, which indicates that both the SOAP message body and header must be
           signed
       –   sp:EncryptedParts, which indicates that the SOAP message body must be encrypted.
Each policy expression can contain an All expression, an ExactlyOne expression or a policy expression
element from a WS-Policy grammar, such as WS-Security, WS-RM, or WS-Addressing. Each of these
expressions may contain another Policy expression. This level of flexibility allows providers to
completely specify the requirements that must be met by requesters beyond those described in the
provider's WSDL description.

Policy expressions are external to the metadata stored in UDDI and WSDL, so providers must rely on a
separate mechanism for distributing WS-Policy information: WS-MetadataExchange or WS-
PolicyAttachment. The WS-MetadataExchange specification defines an encapsulation format for Web
service metadata (such as WS-Policy expressions), a mechanism for metadata-driven message exchange,
and relies on the WS-Transfer specification to provide a Web service endpoint from which requesters can
retrieve the metadata. The WS-PolicyAttachment specification defines how to reference policies from
WSDL definitions, how to associate policies with deployed endpoints, and how to associate policies with
UDDI entries.

In 2006, WS-Policy and WS-PolicyAttachment were submitted to W3C for standardization. They are
scheduled to be released as W3C Recommendations in 2007. In 2005, WS-SecurityPolicy was submitted
to the OASIS Web Services Secure Exchange Technical Committee. Even though these specifications
are not official OASIS standards, interoperable commercial and open source implementations are
available from organizations that were not involved in developing the specification, such as the Apache
Software Foundation and Sun Microsystems.




                                                 3-13
