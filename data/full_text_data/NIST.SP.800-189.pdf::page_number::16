                                                                                             NIST SP 800-189                                                 RESILIENT INTERDOMAIN TRAFFIC EXCHANGE:
                                                                                                                                                                     BGP SECURITY & DDOS MITIGATION

                                                                                             Definitions of Peering Relations, Customer Cone: These definitions are useful for route leaks
                                                                                             (here and in Section 4.9) and also for BGP-OV (Section 4.3), prefix filtering (Sections 4.4 and
                                                                                             4.5), and SAV/uRPF (Sections 5.1 and 5.2). A transit provider typically provides service to
                                                                                             connect its customer(s) to the global internet. A customer AS or network may be single-homed
                                                                                             to one transit provider or multi-homed to more than one transit providers. A stub customer AS
                                                                                             has no customer ASes or lateral peer ASes of its own. A leaf customer is a stub customer that is
                                                                                             single-homed to one transit provider and not connected to any other AS. Peering relationships
                                                                                             considered in this document are provider-to-customer (P2C), customer-to-provider (C2P), and
                                                                                             peer-to-peer (p2p). Here, “provider” refers to transit provider. The first two are transit
                                                                                             relationships. A peer connected via a p2p link is known as a lateral peer (non-transit). A
                                                                                             customer cone of AS A is defined as AS A plus all the ASes that can be reached from A
                                                                                             following only P2C links [Luckie]. The term “customer cone prefixes” of an AS refers to the
                                                                                             union of the prefixes received from all directly connected customers and the prefixes originated
This publication is available free of charge from: https://doi.org/10.6028/NIST.SP.800-189




                                                                                             by the AS itself. Naturally, this set recursively includes customers’ prefix advertisements (down
                                                                                             the hierarchy). ASes that have a lateral peering (i.e., p2p) relationship typically announce their
                                                                                             customer cone prefixes to each other and subsequently announce the lateral peer’s customer
                                                                                             cone prefixes to their respective customers but not to other lateral peers or transit providers.




                                                                                                                      Figure 2: Illustration of the basic notion of a route leak

                                                                                             These relationships are significant because much of the operation of the global internet is
                                                                                             designed such that a stub or customer AS should never be used to route between two transit
                                                                                             ASes. This policy is implemented by insuring that stub or customer ASes do not pass BGP
                                                                                             routing information received from one transit provider to another. Figure 2 illustrates a common
                                                                                             form of route leak that occurs when a multi-homed customer AS (such as AS3 in Figure 2) learns
                                                                                             a prefix update from one transit provider (ISP1) and “leaks” the update to another transit
                                                                                             provider (ISP2) in violation of intended routing policies, and the second transit provider does not
                                                                                             detect the leak and propagates the leaked update to its customers, lateral peers, and transit ISPs

                                                                                                                                                 5
