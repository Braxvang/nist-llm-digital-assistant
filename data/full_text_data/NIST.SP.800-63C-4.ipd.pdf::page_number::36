      NIST SP 800-63C-4 ipd                                             Digital Identity Guidelines
      December 2022                                                     Federation and Assertions


922   such as an email address. This process allows the RP to programmatically select the
923   appropriate IdP for that identifier.
924   The RP MAY employ mechanisms to remember the authorized party’s decision to use
925   a given IdP. Since this mechanism is employed prior to authentication at the RP, the
926   manner in which the RP provides this mechanism (e.g., a browser cookie outside the
927   authenticated session) is separate from the RP subscriber account described in Sec. 5.4. If
928   such a mechanism is provided, the RP SHALL allow the authorized party to revoke such
929   remembered options at a future time.

930   5.4. RP Subscriber Accounts
931   It is common for an RP to keep a record representing a subscriber local to the RP itself,
932   known as the RP subscriber account. The RP subscriber account can contain things like
933   access rights at the RP as well as a cache of identity attributes for the subscriber. An
934   active RP subscriber account is bound to one or more federated identifiers from the RP’s
935   trusted IdPs. Successful authentication of one of these federated identifiers through a
936   federation protocol allows the subscriber to access the information and functionality
937   protected by the RP subscriber account.
938   An RP subscriber account is provisioned when the RP has associated a set of attributes
939   about the subscriber with a data record representing the subscriber account at the RP.
940   The RP subscriber account SHALL be bound to at least one federated identifier, and
941   a given federated identifier is bound to only one RP subscriber account at a given RP.
942   The provisioning can happen prior to authentication or as a result of the federated
943   authentication process, depending on the deployment patterns as discussed in Sec. 5.4.1.
944   Prior to being provisioned, the RP subscriber account does not exist and has no associated
945   data record at the RP.
946   An RP subscriber account is terminated when the RP removes all access to the account
947   at the RP. Termination SHALL include unbinding any federated identifiers and bound
948   authenticators as well as removing attributes and information associated with the account
949   except what is required for auditing and security purposes. An RP MAY terminate an RP
950   subscriber account independently from the IdP for a variety of reasons, regardless of the
951   current validity of the subscriber account from which it is derived.
952   An authenticated session SHALL be created by the RP only when the RP has processed
953   and verified a valid assertion from the IdP that is the issuer of the federated identifier
954   associated with the RP subscriber account. If the assertion also requires presentation of
955   a bound authenticator at FAL3, the bound authenticator SHALL also be presented and
956   processed before the RP subscriber account is associated with an authenticated session, as
957   discussed in Sec. 6.1.2. Before the federated assertion is processed and after termination
958   of the authenticated session, the RP subscriber account is unauthenticated though it could
959   still be provisioned.


                                                  24
