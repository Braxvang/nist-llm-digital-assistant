                                                                GUIDELINES FOR THE SECURE DEPLOYMENT OF IPV6


6.5.4.1     Using the 6over4 Protocol

The 6over4 protocol assigns two IPv6 addresses per interface, a unicast address and a link-local address.
Hosts use a valid 64-bit IPv6 prefix for unicast addresses and set their interface ID simply to their 32-bit
IPv4 address (e.g., A.B.C.D). They also configure the link-local address FE80::A.B.C.D on each 6over4
interface.



The 6over4 protocol regards the IPv4 network as a link layer with multicast capability (like Ethernet).
This means that neighbor discovery processes (such as address resolution and router discovery) work as
they do over a physical link with multicast capabilities. The entire IPv4 infrastructure used for the
tunneling must be multicast enabled.

6.5.4.2     Security Considerations for the 6over4 Protocol

Security considerations for the 6over4 protocol include:

        In addition to attacks against IPv6, attacks against IPv4 are also possible, so standard IPv4
         security controls apply.
        Boundary routers need to apply normal ingress and egress filtering rules to the IPv4 addresses
         and filter incoming unicast IPv4 packets with protocol type 41 from unknown sources.
         Configure boundary routers to accept IPv6-in-IPv4 tunnels only from trusted sources.
         Boundary routers also need to reject multicast IPv4 packets with a more restricted scope than
         appropriate for the interface on which they arrive.
        Decapsulated IPv6 packets with a hop count of 255 must not be treated as locally generated
         packets.
        If IPsec is desired, it is better to run it in the IPv6 domain, end to end or nearly end to end.
         Little is gained (except perhaps some protection against traffic analysis) by adding IPsec in the
         IPv4 domain.
  6.5.5   6to4 and 6rd Protocols

The 6to4 mechanism is designed to provide IPv6 site-to-site and site-to-existing-IPv6-network
connectivity across an IPv4 network by embedding IPv4 addresses in IPv6 prefixes. The 6to4 protocol is
intended to be a start-up technique for providing IPv6 connectivity. One example is when an ISP does
not provide an IPv6 prefix. The 6to4 protocol is appropriate with an IPv6-dominant transition strategy
without a global IPv6 prefix. It is not a permanent solution. More information on the 6to4 protocol is
available in RFC 3056, Connection of IPv6 Domains via IPv4 Clouds.

The 6rd mechanism is designed to allow IPv4 service providers to offer IPv6 to their customers with
minimum delay and expense. The name ―6rd‖ stands for ―IPv6 rapid deployment.‖ Its main idea is to use
the same protocol mechanisms as 6to4 but with the service provider’s IPv6 prefix. Two IETF documents
on 6rd exist: (1) IPv6 Rapid Deployment on IPv4 infrastructures (6rd) describes the motivation for and
user experience with 6rd (RFC 5569); and (2) IPv6 via IPv4 Service Provider Networks (RFC 5969)
defines the protocol. The advantages of 6rd are that it automatically delegates IPv6 prefixes to customers’
sites, operates statelessly, allows customers to use native IPv6, and can be provisioned with a few simple
steps. The problem 6rd solves that 6to4 does not is route discovery. A packet originating from any native
IPv6 address needs to traverse, somewhere, a relay router to obtain IPv6 over IPv4 encapsulation. Using


                                                    6-17
