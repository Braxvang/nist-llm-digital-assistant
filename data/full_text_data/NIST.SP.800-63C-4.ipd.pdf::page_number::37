      NIST SP 800-63C-4 ipd                                                         Digital Identity Guidelines
      December 2022                                                                 Federation and Assertions


960   5.4.1. Provisioning Models
961   The lifecycle of the provisioning process for an RP subscriber account varies depending
962   on factors including the trust agreement discussed in Sec. 5.1 and the deployment
963   pattern of the IdP and RP. However, in all cases, the RP subscriber account SHALL be
964   provisioned at the RP prior to the establishment of an authenticated session at the RP in
965   one of the following ways:
966   Just-In-Time Provisioning
967      An RP subscriber account is created automatically the first time the RP receives an
968      assertion with an unknown federated identifier from an IdP. Any identity attributes
969      learned during the federation process, either within the assertion or through an identity
970      API as discussed in Sec. 6.3, MAY be associated with the RP subscriber account.
971      Accounts provisioned in this way are bound to the federated identifier in the assertion
972      used to provision them. This is the most common form of provisioning in federation
973      systems, as it requires the least coordination between the RP and IdP. However, in
974      such systems, the RP SHALL be responsible for managing any cached attributes it
975      might have.

                               Authentication

                                                                       Subscriber
                  Subscriber                       IdP
                                                                        Account


                                                               Identity API
                   Start Session       Assertion



       Start                                                                                      Authenticated
                                                                          RP                        Session
                                                   RP    Provision     Subscriber
                                                                        Account


                                      Figure 6. Just-In-Time Provisioning




                                                         25
