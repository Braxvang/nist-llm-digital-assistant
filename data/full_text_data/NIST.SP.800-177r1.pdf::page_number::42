                                                                                               NIST SP 800-177 REV. 1                                                         TRUSTWORTHY EMAIL




                                                                                                              Client connects to port 25
                                                                                                              Server: 220 mx.example.com
                                                                                                              Client: HELO mta.example.net
                                                                                                              S: 250 Hello mta.example.net, I am glad to meet you
                                                                                                              C: MAIL FROM:<alice@example.org>
                                                                                                              S: 250 Ok
                                                                                                              C: RCPT TO:<bob@example.com>
                                                                                                              S: 354 End data with <CR><LF>.<CR><LF>
                                                                                                              C: To: bob@example.org
                                                                                                                From: alice.sender@example.net
                                                                                                                Date: Today
                                                                                                                Subject: Meeting today
This publication is available free of charge from: https://doi.org/10.6028/NIST.SP.800-177r1




                                                                                                              …

                                                                                                                        Figure 4-2: SMTP envelope header vs. message header

                                                                                               Because of the nature of DNS (which SPF uses for publication) an SPF policy is tied to one
                                                                                               domain. �at is, @example.org and @sub.example.org are considered separate domains just
                                                                                               like @example.net and all three need their own SPF records. �is complicates things for
                                                                                               organizations that have several domains and subdomains that may (or may not) send mail. �ere
                                                                                               is a way to publish a centralized SPF policy for a collection of domains using the include: tag
                                                                                               (see Sec 4.2.2.2 below)

                                                                                               SPF was ﬁrst speciﬁed in [RFC4408] as an experimental protocol, since at the same time other,
                                                                                               similar proposals were also being considered. Over time however, SPF became widely deployed
                                                                                               and was ﬁnalized in [RFC7208] (and its updates). �e changes between the ﬁnal version and the
                                                                                               original version are mostly minor, and those that base their deployments on the experimental
                                                                                               version are still understood by clients that implement the ﬁnal version. �e most signiﬁcant
                                                                                               diﬀerence is that the ﬁnal speciﬁcation no longer calls for the use of a specialized RRType
                                                                                               (simply called a SPF RR) and instead calls for the sender policy to be encoded in a TXT
                                                                                               Resource Record, in part because it proved too diﬃcult to universally upgrade legacy DNS
                                                                                               systems to accept a new RRType. Older clients may still look for the SPF RR, but the majority
                                                                                               will fall back and ask for a TXT RR if it fails to ﬁnd the special SPF RR. Resolution of the
                                                                                               Sender Policy Framework (SPF) and Sender ID Experiments [RFC6686] presents the evidence
                                                                                               that was used to justify the abandonment of the SPF RR.

                                                                                               SPF is seen as a way to reduce the risk of phishing email being delivered and used as to install
                                                                                               malware inside an agency's network. Since it is relatively easy to check using the DNS, SPF is
                                                                                               seen as a useful layer of email checks.




                                                                                                                                                29
