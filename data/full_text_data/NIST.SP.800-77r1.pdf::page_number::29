                                                                                              NIST SP 800-77 REV. 1                                                           GUIDE TO IPSEC VPNS




                                                                                                            VPN                                                                  Host
                                                                                                            clients
This publication is available free of charge from: https://doi.org/10.6028/NIST.SP.800-77r1




                                                                                                                                                                              VPN
                                                                                                                                                                              clients

                                                                                                                      Figure 2: Gateway-to-Gateway VPN Architecture Example

                                                                                              This model is relatively simple to understand. To facilitate VPN connections, one of the VPN
                                                                                              gateways issues a request to the other gateway to establish an IPsec connection. The two VPN
                                                                                              gateways exchange information with each other and create an IPsec connection. Routing on each
                                                                                              network is configured so that as hosts on one network need to communicate with hosts on the
                                                                                              other network, their network traffic is automatically routed through the IPsec connection,
                                                                                              protecting it appropriately. A single IPsec connection establishing a cryptographically protected
                                                                                              tunnel between the gateways can support all communications between the two networks, or
                                                                                              multiple IPsec connections can each protect different types or classes of traffic. The gateways
                                                                                              connect to each other using IPv4 or IPv6 protocols. When using tunnel mode, the IP address
                                                                                              family of the outer ESP packets transmitted between the gateways does not need to be the same
                                                                                              as the IP address family of the encrypted IP packets. For example, an IPsec connection between
                                                                                              the hosts on IPv6 addresses 2001:db8:1:2::45 and 2001:db8:1:2::23 could be used to transport
                                                                                              IPv4 traffic from 192.0.2.0/24 to 198.51.100.0/24. These types of IPsec connections are often
                                                                                              called 6in4 or 4in6, respectively, to denote the inner and outer IP families.

                                                                                              Figure 2 illustrates a gateway-to-gateway VPN that does not provide full protection for data
                                                                                              throughout its transit. In fact, the gateway-to-gateway architecture only protects data between the
                                                                                              two gateways, as denoted by the solid line. The dashed lines indicate that communications
                                                                                              between VPN clients and their local gateway and between the remote gateway and destination
                                                                                              hosts (e.g., servers) are not protected by the gateway-to-gateway architecture. The other VPN
                                                                                              models provide protection for more of the transit path. The gateway-to-gateway architecture is
                                                                                              most often used when connecting two secured networks, such as linking a branch office to
                                                                                              headquarters over the internet. The gateway-to-gateway architecture is the easiest to implement
                                                                                              in terms of user and host management. Gateway-to-gateway VPNs are typically transparent to
                                                                                              users; the use of a gateway-to-gateway VPN connection is not noticeable to them. Also, the
                                                                                              usersâ€™ systems and the target hosts (e.g., servers) do not need to have any VPN client software
                                                                                              installed, nor should they require any reconfiguration, to be able to use the VPN.

                                                                                              If the gateway-to-gateway VPN connects two different organizations, it is possible that some
                                                                                              special DNS configuration is required if machines in one network need to be able to reach


                                                                                                                                              12
