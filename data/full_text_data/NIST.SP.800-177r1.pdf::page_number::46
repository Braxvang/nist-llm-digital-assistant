                                                                                               NIST SP 800-177 REV. 1                                                            TRUSTWORTHY EMAIL




                                                                                               by an organization that are not used to send email, for example Web only domains, should
                                                                                               include an SPF RR with the policy indicating that there are no valid email senders for the given
                                                                                               domain.

                                                                                               4.4.3   SPF and DNS

                                                                                               Since SPF policies are now only encoded in DNS TXT resource records, no specialized software
                                                                                               is needed to host SPF RRs. Organizations can opt to include the old (no longer mandated) unique
                                                                                               SPF RRType as well, but it is usually not needed, as clients that still query for the type
                                                                                               automatically query for a TXT RR if the SPF RR is not found.

                                                                                               Organizations that deploy SPF should also deploy DNS security (DNSSEC) [RFC4033],
                                                                                               [RFC4034], [RFC4035]. DNSSEC provides source authentication and integrity protection for
                                                                                               DNS data. SPF RRs in DNSSEC signed zones cannot be altered or stripped from responses
                                                                                               without DNSSEC aware receivers detecting the attack. Its use is more fully described in Section
This publication is available free of charge from: https://doi.org/10.6028/NIST.SP.800-177r1




                                                                                               5.

                                                                                               4.4.3.1 Changing an Existing SPF Policy

                                                                                               Changing the policy statement in an SPF RR is straightforward but requires timing
                                                                                               considerations due to the caching nature of DNS. It may take some time for the new SPF RR to
                                                                                               propagate to all authoritative servers. Likewise, the old, outgoing SPF RR may be cached in
                                                                                               client DNS servers for the length of the SPF's TXT RR Time-to-Live (TTL). An enterprise
                                                                                               should be aware that some clients might still have the old version of the SPF policy for some
                                                                                               time before learning the new version. To minimize the eﬀect of DNS caching, it is useful to
                                                                                               decrease the DNS timeout to a small period of time (e.g., 300 seconds) before making changes,
                                                                                               and then restoring DNS to a longer time period (e.g., 3600 seconds) after the changes have been
                                                                                               made, tested, and conﬁrmed to be correct.

                                                                                               4.4.4   Considerations for SPF when Using Cloud Services or Contracted Services

                                                                                               When an organization outsources its email service (whole or part) to a third party such as a cloud
                                                                                               provider or contracted email service, that organization needs to make sure any email sent by
                                                                                               those third parties will pass SPF checks. To do this, the enterprise administrator should include
                                                                                               the IP addresses of third party senders in the enterprise SPF policy statement RR. Failure to
                                                                                               include all the possible senders could result in valid email being rejected due to a failure when
                                                                                               doing the SPF check.

                                                                                               Including third-parties to an SPF RR is done by adding the IP addresses/hostnames individually
                                                                                               or using the include: tag to reference a third party's own SPF record (if one exists). In general, it
                                                                                               is preferable to use the include: mechanism, as the mechanism avoids hard-coding IP addresses
                                                                                               in multiple locations. �e include: tag does have a hard limit on the number of “chained”
                                                                                               include: tag that a client will look up to prevent an endless series of queries. �is value is ten
                                                                                               unique DNS lookups by default.




                                                                                                                                                33
