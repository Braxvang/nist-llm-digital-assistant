       NIST SP 800-63C-4 ipd                                             Digital Identity Guidelines
       December 2022                                                     Federation and Assertions


1018   The IdP SHOULD signal downstream RPs when the attributes of a subscriber account
1019   available to the RP have been updated. This can be accomplished using shared signaling
1020   as described in Sec. 5.7, through a provisioning API as described in Sec. 5.4.3, or by
1021   providing a signal in the assertion (e.g., a timestamp indicating when relevant attributes
1022   were last updated, allowing the RP to determine that its cache is out of date).
1023   The IdP SHOULD signal downstream RPs when a subscriber account is terminated, or
1024   when the subscriber account’s access to an RP is revoked. This can be accomplished
1025   using shared signaling as described in Sec. 5.7 or through a provisioning API as described
1026   in Sec. 5.4.3. Upon receiving such a signal, the RP SHALL terminate the RP subscriber
1027   account and remove all personal information associated with the RP subscriber account,
1028   except what is required for audit and security purposes.

1029   5.4.3. Provisioning APIs
1030   As part of some proactive forms of provisioning, the RP can be given access to subscriber
1031   attributes through a general-purpose attribute API known as a provisioning API. This
1032   type of API allows an IdP to push attributes for a range of subscriber accounts, and
1033   sometimes allows an RP to query the attributes of these subscriber accounts directly.
1034   Since access to the API is granted outside the context of a federated transaction, access
1035   to the provisioning API for a given subscriber does not indicate to the RP that a given
1036   subscriber has been authenticated. See Sec. 6, Assertions for more information on how
1037   the federated authentication process is accomplished using assertions.
1038   The attributes in the provisioning API available to a given RP SHALL be limited to
1039   only those necessary for the RP to perform its functions. As part of establishing the trust
1040   agreement, the IdP SHALL document when an RP is given access to a provisioning API
1041   including at least the following:
1042       • the purpose for the access using the provisioning model;
1043       • the set of attributes made available to the RP;
1044       • whether the API functions as a push to the RP, a pull from the RP, or both; and
1045       • the population of subscribers whose attributes are made available to the RP.
1046   The IdP SHALL require authentication from the RP for any pull-based access to a
1047   provisioning API. The RP SHALL require authentication from the IdP for any push-
1048   based access to a provisioning API.
1049   A provisioning API SHALL NOT be made available under a dynamic or implicit trust
1050   agreement. The IdP SHALL NOT make a provisioning API available to any RP outside
1051   of an established trust agreement. The IdP SHALL provide access to a provisioning
1052   API only as part of a federated identity relationship with an RP to facilitate federated
1053   transactions with that RP and related functions such as signaling revocation of the
1054   subscriber account. The IdP SHALL revoke an RP’s access to the provisioning API

                                                    28
