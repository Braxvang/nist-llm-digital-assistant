                                                                                              NIST SP 800-204A                                BUILDING SECURE MICROSERVICES-BASED APPLICATIONS
                                                                                                                                                              USING SERVICE-MESH ARCHITECTURE


                                                                                              Recommendation for Implementing Distributed Tracing (SM-DR24): When configuring the
                                                                                              service proxies for implementing distributed tracing, care should be taken to ensure that the
                                                                                              application services are instrumented to forward the headers for communication packets they
                                                                                              received.

                                                                                              It is important to note that in order to carry out the above recommendation, a minimal amount of
                                                                                              instrumenting the application service is necessary, unlike other infrastructure functions provided
                                                                                              under Service Mesh architecture [14].

                                                                                              4.6   Configuration for Network Resilience Techniques
This publication is available free of charge from: https://doi.org/10.6028/NIST.SP.800-204A




                                                                                              Recommendation for Storing Data for Implementation of Network Resilience (SM-DR25): Data
                                                                                              pertaining to retries, timeouts, circuit breaking settings, or canary deployments (in general, all
                                                                                              control plane configuration data) should be stored in robust data stores, such as Key/Value
                                                                                              stores.

                                                                                              Recommendation for Implementation of Health Checking of Service Instances (SM-DR26): The
                                                                                              health checking function for service instances should be tightly integrated with the service
                                                                                              discovery function to maintain the integrity of the information used for load balancing.

                                                                                              This health data can be reported to a central health checking service (or a central service
                                                                                              discovery system), but it may also be used locally only (e.g., a service proxy performs health
                                                                                              checking on open connections it maintains, makes local load balancing decisions, and avoids
                                                                                              hosts it deems to be unhealthy).

                                                                                              4.7   Configuration for Cross-Origin Resource Sharing (CORS)

                                                                                              Recommendation for Cross-Origin Resource Sharing (CORS) (SM-DR27): An edge service (i.e.,
                                                                                              entry point for microservice) may often have to be configured for CORS for communicating with
                                                                                              external services, such as a web UI client service [15]. The CORS policy for an edge service
                                                                                              should be configured using the Service Mesh capability (e.g., VirtualService resourceâ€™s
                                                                                              CorsPolicy configuration in Istio) rather than handling it through the microservice application
                                                                                              service code.

                                                                                              4.8   Configuration of Permissions for Administrative Operations

                                                                                              Recommendation for Access Control for Administrative Operations (SM-DR28): There should
                                                                                              be granular access control permissions for all administrative operations in a service mesh (e.g.,
                                                                                              policy specifications, configuration parameters for service resiliency parameters, canary
                                                                                              deployments, retries, etc.) that are specifiable at the level of all services in a namespace, a
                                                                                              named service within a namespace, etc. Generally, the interface for exercising this functionality
                                                                                              may not be part of the service mesh itself but part of an installation software or orchestration
                                                                                              software used for configuring the application service cluster.




                                                                                                                                              16
