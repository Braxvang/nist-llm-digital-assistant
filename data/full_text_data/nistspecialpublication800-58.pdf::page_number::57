NIST SP 800-58                                              Voice Over IP Security
_____________________________________________________________________________


 7     Firewalls, Address Translation, and Call Establishment

        Firewalls and NAT present a formidable challenge to VOIP implementers.
        However, there are solutions to these problems, if one is willing to pay the price.
        Commonly used solutions that can be integrated into a standard network
        configuration containing a firewall and/or NAT are presented here. Much of the
        standards work thus far has been done for SIP in the IETF, though the ITU has
        recently taken up the firewall/NAT traversal issue for H.323 in Study Group 16.
        It is important to note that all three major VOIP protocols, SIP, H.323, and
        H.248/MEGACO all have similar problems with firewalls and NATs. Although
        the use of NATs may be reduced as IPv6 is adopted, they will remain a common
        component in networks for years to come, and IPv6 will not alleviate the need for
        firewalls, so VOIP systems must deal with the complexities of firewalls and
        NATs.


 7.1    Firewalls

        Firewalls are a staple of security in today’s IP networks. Whether protecting a
        LAN, WAN, encapsulating a DMZ, or just protecting a single computer, a
        firewall is usually the first line of defense against would be attackers. Firewalls
        work by blocking traffic deemed to be invasive, intrusive, or just plain malicious
        from flowing through them. If networks are castles, firewalls are the
        drawbridges. Traffic not meeting the requirements of the firewall is dropped.
        Processing of traffic is determined by a set of rules programmed into the firewall
        by the network administrator. These may include such commands as “Block all
        FTP traffic (port 21)” or “Allow all HTTP traffic (port 80)”. Much more complex
        rule sets are available in almost all firewalls.

        A useful property of a firewall, in this context, is that it provides a central location
        for deploying security policies. It is the ultimate bottleneck for network traffic
        because when properly designed, no traffic can enter or exit the LAN without
        passing through the firewall. This situation lends itself to the VOIP network
        where firewalls simplify security management by consolidating security measures
        at the firewall gateway, instead of requiring all the endpoints to maintain up to
        date security policies. This takes an enormous burden off the VOIP network
        infrastructure. Note that this abstraction and simplification of security measures
        comes at a price. The introduction of firewalls to the VOIP network complicates
        several aspects of VOIP, most notably dynamic port trafficking and call setup
        procedures. This chapter describes various complications firewalls introduce into
        the system. But since firewalls are an essential and often already deployed
        component of the modern network, we will also examine some proposed and
        applied solutions to these entanglements.




52
