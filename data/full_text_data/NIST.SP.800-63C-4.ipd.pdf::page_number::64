       NIST SP 800-63C-4 ipd                                              Digital Identity Guidelines
       December 2022                                                      Federation and Assertions


1663   perhaps by a browser replaying an assertion at multiple RPs. Even if the assertion is
1664   audience-restricted and rejected by unintended RPs, its presentation at unintended RPs
1665   could lead to leaking information about the subscriber and their online activities. Though
1666   it is possible to intentionally create an assertion designed to be presented to multiple RPs,
1667   this method can lead to lax audience restriction of the assertion itself, which in turn could
1668   lead to privacy and security breaches for the subscriber across these RPs. Such multi-
1669   RP use is not recommended. Instead, RPs are encouraged to fetch their own individual
1670   assertions.
1671   The RP SHALL protect itself against injection of manufactured or captured assertions by
1672   use of cross-site scripting protection and other accepted techniques.
1673   Conveyance of the assertion from the IdP to the subscriber, as well as from the subscriber
1674   to the RP, SHALL be made over an authenticated protected channel.
1675   Note that in a federation proxy described in Sec. 5.1.3, the IdP audience restricts the
1676   assertion to the proxy, and the proxy restricts any newly-created assertions to the
1677   downstream RP.

1678   7.3. Protecting Information
1679   Communications between the IdP and the RP SHALL be protected in transit using an
1680   authenticated protected channel. Communications between the subscriber and either
1681   the IdP or the RP (usually through a browser) SHALL be made using an authenticated
1682   protected channel.
1683   Note that the IdP may have access to information that may be useful to the RP in
1684   enforcing security policies, such as device identity, location, system health checks, and
1685   configuration management. If so, it may be a good idea to pass this information along to
1686   the RP within the bounds of the subscriberâ€™s privacy preferences described in Sec. 9.2.
1687   Additional attributes about the user MAY be included outside of the assertion itself
1688   by use of authorized access to an identity API as discussed in Sec. 6.3. Splitting
1689   user information in this manner can aid in protecting user privacy and allow for
1690   limited disclosure of identifying attributes on top of the essential information in the
1691   authentication assertion itself.
1692   The RP SHALL , where feasible, request derived attribute values rather than full attribute
1693   values as described in Sec. 9.3. The IdP SHALL support derived attribute values to the
1694   extent possible.




                                                    52
