                                                                GUIDELINES FOR THE SECURE DEPLOYMENT OF IPV6


services should be among the first to be fully dual stack capable in any deployment effort. Software
applications need to be modified to query for both forms of addresses and to choose between them. IPv4
may need to remain the network protocol between a caching server and authoritative DNS servers to
ensure continuity of service. Many factors can affect network performance and availability during this
conversion process, and these can impact both IPv4 and IPv6 access. DNS may supply AAAA records
before services are fully turned on and reachable, and timeouts may occur. Applications may be
unprepared to handle them. Caching resolvers may have to deal with A and AAAA records having
different time-to-live values.

It is important to verify that client resolvers are receiving the correct responses and resource records. An
ongoing testing phase for IPv6-capable DNS services is a necessary step during any organization’s IPv6
deployment process. When this process includes testing IPv6 application software, separate DNS servers
and domain names should be used to support simultaneous IPv6 testing and operational IPv4 name
resolution.

DNS responses with AAAA records are longer than similar IPv4 responses, because the records are
simply larger than comparable A records and interfaces may have more than one IPv6 address in the
DNS. Zone file transfer sizes will increase and, potentially, responses returning multiple AAAA resource
records (e.g. MX requests) may require fragmentation. Since IPv6 fragments are discouraged, and
sometimes are blocked, this could impact availability.

Some authoritative servers ignore queries for an AAAA record and cause a resolver first to wait and
timeout and then to fall back to a query for an A record, which may cause a fatal timeout at the
application that called the resolver. Even if the resolver and application eventually succeed, the result can
be an unacceptable delay for the application’s user, especially with interactive applications like web
browsing.

Advertising IPv6 addresses in DNS during the initial deployment requires additional care. Availability
problems can easily arise if AAAA records are inserted into the DNS zone before IPv6 services are
working. The recommendation is that AAAA records for a service should not be added to a DNS zone
until the address is assigned to an interface on a host, the address is configured and enabled on the host’s
interface, and finally the interface is on a link connected to the IPv6 infrastructure.




                                                    3-41
