NIST SP 800-85A-4                                            PIV CARD APPLICATION & MIDDLEWARE
                                                                      INTERFACE TEST GUIDELINES

                 PIV Client API Test Assertions

All tests in Appendices B.1 to B.10 are performed over the contact interface only except where
stated otherwise. These tests apply to both PIV Middleware versions (with and without
SM/VCI). Tests in Appendix B.11 are performed for PIV Middleware version “800-73-4 Client
API with SM” only, using a contactless reader interface.

Test Assertion Template
 Purpose             A quick description of the test and why it is being run.
 Target              The PIV client API function call being tested.
 Reference(s)        References to SP 800-73-4 or other relevant publications.
 Precondition(s)     Anything that must be done or known prior to executing the
                     scenario.
 Test Steps          Sequence of steps for making a function call.
 Expected Result(s) What the expected execution path yields in terms of data (if
                     applicable) and response status codes.
 Postcondition(s)    A description of the PIV Middleware’s client application and card
                     application state once the test scenario completes.

B.1           pivConnect

B.1.1           Valid Path Test Assertions

B.1.1.1          Initiate Exclusive Connection
 Purpose                  Confirm that an exclusive connection can be obtained by a calling
                          application to the PIV Card reader.
 Target                 pivConnect
 Reference(s)           1. SP 800-73-4 Part 3, Section 3.1.2
                        2. AS04.01, AS04.02, AS04.02A-R4
 Precondition(s)        1. A valid connection description is provided for the card reader.
                        2. There exists a valid physical connection between an instance of
                           the PIV Card and the client application.
                        3. No application is currently connected to the PIV Card
                           Application.
 Test Steps             1. Set sharedConnection := false
                        2. Set connectionDescription := <<valid connection>>
                        3. Create cardHandle reference
                        4. Call pivConnect with
                           • (IN) sharedConnection
                           • (INOUT) connectionDescription
                           • (INOUT) CDLength
                           • (OUT) cardHandle
 Expected Result(s)     Call returns with status_word of PIV_OK and initialized cardHandle.
 Postcondition(s)       Client application is connected to PIV Card.



                                          B-1
