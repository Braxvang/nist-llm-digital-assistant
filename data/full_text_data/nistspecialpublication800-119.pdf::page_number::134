                                                                GUIDELINES FOR THE SECURE DEPLOYMENT OF IPV6


        As a stand-alone transition method
        Used together with protocol translation.
At a high level, tunnels are either configured tunnels or automatic tunnels. Configured tunnels require
system administrators to configure the endpoints of the tunnel. With automatic tunnels, the nodes
configure the endpoints themselves. Typically, an organization uses configured tunnels for infrastructure
tunneling. Hosts use automatic tunnels to tunnel back to IPv4 or IPv6 islands. Configured tunnels are
static in nature, and automatic tunnels are dynamic in nature.

Figure 6-1 shows a generic case in which two hosts on IPv6 networks can only reach each other through
an IPv4 network. Each host can reach a dual stack IPv4/IPv6 router. This dual stack router in turn knows
how to reach another IPv4/IPv6 dual stack router over an IPv4 network. The second router can forward
the IPv6 packet successfully.

These routers are also set up to serve as tunnel endpoints. As tunnel endpoints, they encapsulate the IPv6
packet inside an IPv4 packet and forward it to the other tunnel endpoint. Then the tunnel endpoint
decapsulates the IPv6 packet for further processing. The paths do not need not to be symmetric. The
end-point of the tunnel found in the left-to-right direction may be different from the starting point of the
tunnel found in the right-to-left direction. From the IPv6 perspective, the IPv4 tunnel looks like a single
hop.




                         Figure 6-1. Example of Tunneling IPv6 over IPv4 Networks

Figure 6-1 is a simplified view of tunneling. It illustrates the general concept. There are, in fact, many
different mechanisms for tunneling.

When an IPv4 header directly encapsulates IPv6, it uses protocol number 41. When an IPv6 header
directly encapsulates IPv4, it uses Next Header 4. It is possible to use other encapsulation methods such
as Generic Routing Encapsulation (GRE [RFC 2784]) or IPsec ESP (RFC 4303).

IPv6 packets can be up to four gigabytes in size. The maximum size for an IPv4 packet is 64k.
Fragmentation may be required when an IPv6 packet is encapsulated in IPv4. Where possible, the IPv6
layer should discover the IPv4 path maximum transmission unit (MTU). This may not always be possible,
since not all tunnels report real (reduced) MTUs. Using this information, it should create the most


                                                    6-12
