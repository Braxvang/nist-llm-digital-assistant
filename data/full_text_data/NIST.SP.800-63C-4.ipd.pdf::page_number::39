       NIST SP 800-63C-4 ipd                                                             Digital Identity Guidelines
       December 2022                                                                     Federation and Assertions


989    Ephemeral
990      An RP subscriber account is created when processing the assertion, but then the RP
991      subscriber account is terminated when the authenticated session ends. This process
992      is similar to a just-in-time provisioning, but the RP keeps no long-term record of the
993      account when the session is complete, except what is required for audit and security
994      purposes (such as access logs). This form of provisioning is useful for RPs that fully
995      externalize access rights to the IdP, allowing the RP to be more simplified with less
996      internal state. However, this pattern is not common because even the simplest RPs
997      tend to have a need to track state within the application or at least keep a record of
998      actions associated with the federated identifier.

                             Authentication

                                                                     Subscriber
                Subscriber                       IdP                  Account


                                                             Identity API
                 Start Session       Assertion                                                   Terminate Session
                                                                                                      and RP
                                                                                                    Subscriber
                                                                                                     Account
        Start                                                                       Authenticated
                                                                        RP            Session                           RP
                                                 RP    Provision     Subscriber                                      Subscriber
                                                                      Account                                         Account


                                                 Figure 8. Ephemeral Provisioning

999    Other
1000      Other RP subscriber account provisioning models are possible but the details of
1001      such models are outside the scope of these guidelines. The details of any alternative
1002      provisioning model SHALL be included in the privacy risk assessments of the IdP
1003      and RP.
1004   All organizations SHALL document their provisioning model as part of their trust
1005   agreement.

1006   5.4.2. Attribute Synchronization
1007   In a federated process, the IdP and RP each have their own stores of identity attributes
1008   associated with the subscriber account. The IdP has a direct view of the subscriber
1009   account, but the RP subscriber account is derived from a subset of attributes from the
1010   subscriber account that are presented during the federation transaction. Therefore, it is
1011   possible for the IdP’s and RP’s attribute stores to diverge from with each other over time.
1012   From the RP’s perspective, the IdP is the authoritative source for any attributes that the
1013   IdP asserts as being associated with the subscriber account at the IdP. However, the RP
1014    MAY additionally collect, and optionally verify, other attributes to associate with the RP
1015   subscriber account. Sometimes, these attributes can even override what’s asserted by the
1016   IdP. For example, if an IdP asserts a full display name for the subscriber, the RP can allow
1017   the subscriber to provide an alternative preferred name for use at the RP.

                                                                    27
