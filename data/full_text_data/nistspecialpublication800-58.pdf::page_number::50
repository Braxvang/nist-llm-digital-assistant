NIST SP 800-58                                             Voice Over IP Security
    _________________________________________________________________________

      an H.323 based network perform, except the call setup and header parsing is
      much simpler. The other issues SIP-based VOIP encounters with firewalls are
      associated with RTP traffic and incoming calls, as covered in section 7.4. As with
      H.323, the big problem for SIP is NAT.

      NAT inhibits SIP’s registration and communication mechanisms and requires
      innovative solutions to resolve these issues. The problems exist because in a SIP-
      based network, the SIP proxy is normally outside the NAT device. There are
      three main scenarios for using a SIP proxy:
      − The proxy is within the corporate LAN and the Teleworker connects from
          outside
      − The proxy is at the telecom side and clients from, for instance, smaller
          companies connecting to this proxy for VOIP service
      − Two administrative domains are connected, both have their own proxy.

      So the problem is bartering communication between a proxy server that deals with
      global IP addresses and a machine that has been assigned a private network
      address. Rosenberg & Schulzrinne [22] classify three different sets of problems
      SIP traffic has in such an architecture: originating requests, receiving requests,
      and handling RTP. We have already dealt with the incompatibilities of RTP with
      NAT and now we will see the issues NAT presents to the call setup process itself.

      To initialize a session from behind the NAT, a caller can simply send an INVITE
      message as always. The outgoing port number (5060) will be preserved by the
      NAT, but response communication could be disturbed. If SIP is implemented
      over UDP (recall SIP is protocol independent) the proxy server must send the
      UDP response to the address and port the request arrived on [22] A simpler
      solution is to use the standard practice of routing SIP communication over TCP.
      With TCP, the response from the callee will come over the same channel as the
      original INVITE and so NAT will not present a problem.




                                                                                      45
