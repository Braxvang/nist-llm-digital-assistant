NIST SP 800-219r1                                                       Automated Secure Configuration
July 2023                                                                    Guidance from the mSCP

offer a convenient, Apple-supported mechanism for applying security settings to a macOS
environment. Additionally, they can be cryptographically signed to ensure integrity and
authenticity. These factors make configuration profiles the preferred vehicle for configuration
delivery. However, mobileconfig files cannot modify all macOS settings, so a configuration
script is needed for those settings that are not supported. See the developer documentation page
for an example configuration profile and brief descriptions of its properties.
A configuration script is a shell script that directly manipulates operating system files. The script
content is derived from all YAML rule files that have a mobileconfig value of false and
belong to the specified baseline. The YAML rule file must contain the fix section in order to
generate its corresponding configuration script entry.

       Content Generation Scripts
The mSCP provides several types of scripts for generating baselines, human-readable guidance,
baseline compliance checkers, and other types of content. Each script is described below.

3.4.1. Generate Baseline Script
The generate_baseline.py Python script compiles a list of security rules into a single baseline
YAML file. It can be used to modify an existing security baseline or create a new one. See the
wiki for additional information.

3.4.2. Generate Guidance Script
The generate_guidance.py script can produce human-readable guidance and generate the
macOS Security Compliance Tool, which is a Z shell script.
The generate_guidance.py script takes a baseline file and produces a human-readable guide
with information from the YAML rules files. The script can create documentation in several
formats but always generates an AsciiDoc file. AsciiDoc (.adoc) is a plain text format that uses
markup conventions for traditional document formatting and organization. AsciiDoc files are
easily transformable into many other formats via the generate_guidance.py script, including
HTML, PDF, and Excel. The Excel format is particularly useful for quickly viewing all of the
rules of a baseline, and it contains all of the data in the YAML rules files.
The generate_guidance.py script can also create configuration profiles (mobileconfig files)
and the macOS Security Compliance Tool. Using the -s argument, the generate_guidance.py
script will generate an org.{baseline}.audit.plist file and another script, the macOS
Security Compliance Tool, that can check and remediate compliance settings. The audit.plist
file can be used to set an exemption to organizational rules for approved users so that compliance
checks can succeed without findings. To create an exemption for a rule, the exempt field should
be set to true and an exempt_reason should be added.
See the wiki for more information on the generate_guidance.py script.




                                                 10
